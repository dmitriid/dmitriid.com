<!DOCTYPE html>
<html lang="{{.Site.LanguageCode}}">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  {{ .Hugo.Generator }}

  <meta property="og:title" content="{{ if ne .URL "/" }} {{ .Title }} &middot; {{ end }} {{ .Site.Title }}" />
  <meta property="og:site_name" content="{{ .Site.Title }}" />
  <meta property="og:url" content="{{ .Permalink }}" />

  {{ if .IsPage }}
    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" | safeHTML }}" />
    {{ range .Params.tags }}<meta property="og:article:tag" content="{{ . }}" />
    {{ end }}

    <meta name="twitter:card" content="summary" />
    {{ with .Site.Params.twitter }}
      <meta name="twitter:site" content="@{{ . }}" />
      <meta name="twitter:creator" content="@{{ .Site.Params.twitter }}" />
    {{ end }}
    <meta name="twitter:title" content="{{ .Title }}" />
    <meta name="twitter:description" content="{{ .Description }}" />
    <meta name="twitter:url" content="{{ .Permalink }}" />
    {{ if .Site.Params.AutogenCardImage | or (isset .Params "image")}}
      {{ if (isset .Params "image") }}
        <meta name="twitter:image" content="{{ .Site.BaseURL }}assets/cards/{{ .Params.image }}.png">
        <meta property="og:image" content="{{ .Site.BaseURL }}assets/cards/{{ .Params.image }}.png"/>
      {{ else }}
        <meta name="twitter:image" content="{{ .Site.BaseURL }}assets/cards/{{ first 6 .UniqueID }}/{{ after 6 .UniqueID}}.png">
        <meta property="og:image" content="{{ .Site.BaseURL }}assets/cards/{{ first 6 .UniqueID }}/{{ after 6 .UniqueID}}.png"/>
      {{ end }}
    {{ end }}
  {{ else }}
    <meta property="og:type" content="website" />
  {{ end }}

  {{ if .Description }}
    <meta name="description" content="{{ .Description }}" />
  {{ else }}
    <meta name="description" content="{{ .Site.Params.description }}" />
  {{ end }}

  {{ if ne .URL "/" }}
    <link href="{{ .Site.BaseURL }}index.xml" rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" />
  {{ end }}

  {{if .IsNode}}
    <link href="{{.RSSLink}}" rel="alternate" type="application/rss+xml" title="{{ if ne .URL "/" }}{{ .Title }} &middot; {{ end }}{{ .Site.Title }}" />
  {{end}}
    <link rel="canonical" href="{{ .Permalink }}" />
  
  {{ if .IsPage }}{{ with .Site.Params.gplus }} 
    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Article",
        "headline": "{{ .Title }}",
        "author": {
            "@type": "Person",
            "name": "http://profiles.google.com/{{ .Site.Params.gplus }}?rel=author"
        },
        "datePublished": "{{ .Date.Format "2006-01-02" }}",
        "description": "{{ .Description }}",
        "wordCount": {{ .WordCount }}
    }

    </script>
  {{ end }}{{ end }}

  {{ $doc := . }}
  {{ with .Site.Params.disqus }}
    <script type="text/javascript">
      var disqus_shortname = '{{ . }}';
      var disqus_identifier = '{{if isset $doc.Params "disqus_identifier" }}{{ index $doc.Params "disqus_identifier" }}{{ else }}{{ $doc.Permalink }}{{end}}';
      var disqus_title = '{{if isset $doc.Params "disqus_title" }}{{ index $doc.Params "disqus_title" }}{{ else }}{{ $doc.Title }}{{end}}';
      var disqus_url = '{{if isset $doc.Params "disqus_url" }}{{ index $doc.Params "disqus_url" | html  }}{{ else }}{{ $doc.Permalink }}{{end}}';
    </script>
  {{ end }}

  {{ with .Site.Params.TypeKitID }}
  <script src="https://use.typekit.net/{{ . }}.js"></script>
  <script>try{Typekit.load({ async: true });}catch(e){}</script>
  {{ end }}
  
  <link rel="stylesheet" href="{{ .Site.BaseURL }}/assets/css/normalize.css?{{ .Now.Unix }}">
  <link rel="stylesheet" href="{{ .Site.BaseURL }}/assets/css/freja.css?{{ .Now.Unix }}">

  <title>{{ block "title" . }}
    {{ with .Title }}{{ . }} | {{ end }}{{ .Site.Title }}
    {{ end }}</title>
  
</head>
<body>
<section role="navigation" class="main-nav">
  <figure class="logo" role="banner">
    <img src="{{ .Site.BaseURL }}/assets/img/logo.svg"
         alt="{{ .Site.Title}}"
    />
  </figure>
  <nav role="navigation">
    <ul>
      <li><a href="{{ .Site.BaseURL }}">Home</a></li>
      <li><a href="https://github.com/dmitriid">GitHub</a></li>
      <li><a href="http://old.dmitriid.com/">Old site</a></li>
    </ul>
  </nav>
</section>
<main>
  {{ block "main" . }}
  {{ end }}
</main>
<footer>
  <p>
    Copyright Â© 2016 Dmitrii Dimandt
  </p>
</footer>
</body>
</html>
